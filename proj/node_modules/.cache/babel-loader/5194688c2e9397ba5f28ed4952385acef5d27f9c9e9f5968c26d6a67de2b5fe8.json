{"ast":null,"code":"import { initializeApp } from 'firebase/app';\nimport { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, updateProfile } from 'firebase/auth';\nimport { getFirestore, doc, setDoc, getDoc, collection, addDoc, updateDoc, arrayUnion, arrayRemove, enableIndexedDbPersistence } from 'firebase/firestore';\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDpsag3KQcOyzTiR9Xc_w-yPXnuEyrjtDg\",\n  authDomain: \"ccel-tools.firebaseapp.com\",\n  projectId: \"ccel-tools\",\n  storageBucket: \"ccel-tools.appspot.com\",\n  messagingSenderId: \"653125521567\",\n  appId: \"1:653125521567:web:764b7432f36532279e52aa\",\n  measurementId: \"G-2ZV6ELGWJR\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\n\n// Initialize Auth and Firestore\nexport const auth = getAuth(app);\nexport const db = getFirestore(app);\n\n// Enable offline persistence\nenableIndexedDbPersistence(db).catch(err => {\n  if (err.code === 'failed-precondition') {\n    // Multiple tabs open, persistence can only be enabled\n    // in one tab at a time.\n    console.log('Persistence failed');\n  } else if (err.code === 'unimplemented') {\n    // The current browser doesn't support persistence\n    console.log('Persistence not supported');\n  }\n});\n\n// Authentication functions\nexport const loginWithEmailAndPassword = async (email, password) => {\n  try {\n    const userCredential = await signInWithEmailAndPassword(auth, email, password);\n    return {\n      user: userCredential.user,\n      error: null\n    };\n  } catch (error) {\n    console.error('Login error:', error);\n    return {\n      user: null,\n      error: error.message\n    };\n  }\n};\nexport const registerWithEmailAndPassword = async (email, password) => {\n  try {\n    const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n    return {\n      user: userCredential.user,\n      error: null\n    };\n  } catch (error) {\n    console.error('Registration error:', error);\n    return {\n      user: null,\n      error: error.message\n    };\n  }\n};\nexport const logoutUser = async () => {\n  try {\n    await signOut(auth);\n    return {\n      error: null\n    };\n  } catch (error) {\n    console.error('Logout error:', error);\n    return {\n      error: error.message\n    };\n  }\n};\n\n// Firestore functions\nexport const saveHighlight = async (userId, bookId, highlight) => {\n  if (!userId || !bookId) {\n    console.error('Missing userId or bookId');\n    return {\n      error: 'Missing required parameters'\n    };\n  }\n  try {\n    const highlightRef = doc(db, 'users', userId, 'books', bookId);\n\n    // Get existing document\n    const docSnap = await getDoc(highlightRef);\n    if (docSnap.exists()) {\n      // Update existing highlights\n      await updateDoc(highlightRef, {\n        highlights: arrayUnion(highlight)\n      });\n    } else {\n      // Create new document with highlights\n      await setDoc(highlightRef, {\n        highlights: [highlight]\n      });\n    }\n    return {\n      error: null\n    };\n  } catch (error) {\n    console.error('Save highlight error:', error);\n    return {\n      error: error.message\n    };\n  }\n};\nexport const getHighlights = async (userId, bookId) => {\n  if (!userId || !bookId) {\n    console.error('Missing userId or bookId');\n    return {\n      highlights: [],\n      error: 'Missing required parameters'\n    };\n  }\n  try {\n    const highlightRef = doc(db, 'users', userId, 'books', bookId);\n    const docSnap = await getDoc(highlightRef);\n    if (docSnap.exists()) {\n      return {\n        highlights: docSnap.data().highlights || [],\n        error: null\n      };\n    }\n    return {\n      highlights: [],\n      error: null\n    };\n  } catch (error) {\n    console.error('Get highlights error:', error);\n    return {\n      highlights: [],\n      error: error.message\n    };\n  }\n};\nexport const removeHighlight = async (userId, bookId, highlight) => {\n  if (!userId || !bookId) {\n    console.error('Missing userId or bookId');\n    return {\n      error: 'Missing required parameters'\n    };\n  }\n  try {\n    const highlightRef = doc(db, 'users', userId, 'books', bookId);\n    await updateDoc(highlightRef, {\n      highlights: arrayRemove(highlight)\n    });\n    return {\n      error: null\n    };\n  } catch (error) {\n    console.error('Remove highlight error:', error);\n    return {\n      error: error.message\n    };\n  }\n};","map":{"version":3,"names":["initializeApp","getAuth","signInWithEmailAndPassword","createUserWithEmailAndPassword","signOut","updateProfile","getFirestore","doc","setDoc","getDoc","collection","addDoc","updateDoc","arrayUnion","arrayRemove","enableIndexedDbPersistence","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","auth","db","catch","err","code","console","log","loginWithEmailAndPassword","email","password","userCredential","user","error","message","registerWithEmailAndPassword","logoutUser","saveHighlight","userId","bookId","highlight","highlightRef","docSnap","exists","highlights","getHighlights","data","removeHighlight"],"sources":["/Users/sydneysonday/Desktop/Senior/Reading Front End/senior-project/proj/src/services/firebase.js"],"sourcesContent":["import { initializeApp } from 'firebase/app';\nimport { \n  getAuth, \n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  signOut,\n  updateProfile \n} from 'firebase/auth';\nimport { \n  getFirestore, \n  doc, \n  setDoc, \n  getDoc, \n  collection, \n  addDoc,\n  updateDoc,\n  arrayUnion,\n  arrayRemove,\n  enableIndexedDbPersistence \n} from 'firebase/firestore';\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDpsag3KQcOyzTiR9Xc_w-yPXnuEyrjtDg\",\n  authDomain: \"ccel-tools.firebaseapp.com\",\n  projectId: \"ccel-tools\",\n  storageBucket: \"ccel-tools.appspot.com\",\n  messagingSenderId: \"653125521567\",\n  appId: \"1:653125521567:web:764b7432f36532279e52aa\",\n  measurementId: \"G-2ZV6ELGWJR\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\n\n// Initialize Auth and Firestore\nexport const auth = getAuth(app);\nexport const db = getFirestore(app);\n\n// Enable offline persistence\nenableIndexedDbPersistence(db)\n  .catch((err) => {\n    if (err.code === 'failed-precondition') {\n      // Multiple tabs open, persistence can only be enabled\n      // in one tab at a time.\n      console.log('Persistence failed');\n    } else if (err.code === 'unimplemented') {\n      // The current browser doesn't support persistence\n      console.log('Persistence not supported');\n    }\n  });\n\n// Authentication functions\nexport const loginWithEmailAndPassword = async (email, password) => {\n  try {\n    const userCredential = await signInWithEmailAndPassword(auth, email, password);\n    return { user: userCredential.user, error: null };\n  } catch (error) {\n    console.error('Login error:', error);\n    return { user: null, error: error.message };\n  }\n};\n\nexport const registerWithEmailAndPassword = async (email, password) => {\n  try {\n    const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n    return { user: userCredential.user, error: null };\n  } catch (error) {\n    console.error('Registration error:', error);\n    return { user: null, error: error.message };\n  }\n};\n\nexport const logoutUser = async () => {\n  try {\n    await signOut(auth);\n    return { error: null };\n  } catch (error) {\n    console.error('Logout error:', error);\n    return { error: error.message };\n  }\n};\n\n// Firestore functions\nexport const saveHighlight = async (userId, bookId, highlight) => {\n  if (!userId || !bookId) {\n    console.error('Missing userId or bookId');\n    return { error: 'Missing required parameters' };\n  }\n\n  try {\n    const highlightRef = doc(db, 'users', userId, 'books', bookId);\n    \n    // Get existing document\n    const docSnap = await getDoc(highlightRef);\n    \n    if (docSnap.exists()) {\n      // Update existing highlights\n      await updateDoc(highlightRef, {\n        highlights: arrayUnion(highlight)\n      });\n    } else {\n      // Create new document with highlights\n      await setDoc(highlightRef, {\n        highlights: [highlight]\n      });\n    }\n    \n    return { error: null };\n  } catch (error) {\n    console.error('Save highlight error:', error);\n    return { error: error.message };\n  }\n};\n\nexport const getHighlights = async (userId, bookId) => {\n  if (!userId || !bookId) {\n    console.error('Missing userId or bookId');\n    return { highlights: [], error: 'Missing required parameters' };\n  }\n\n  try {\n    const highlightRef = doc(db, 'users', userId, 'books', bookId);\n    const docSnap = await getDoc(highlightRef);\n    \n    if (docSnap.exists()) {\n      return { highlights: docSnap.data().highlights || [], error: null };\n    } \n    return { highlights: [], error: null };\n  } catch (error) {\n    console.error('Get highlights error:', error);\n    return { highlights: [], error: error.message };\n  }\n};\n\nexport const removeHighlight = async (userId, bookId, highlight) => {\n  if (!userId || !bookId) {\n    console.error('Missing userId or bookId');\n    return { error: 'Missing required parameters' };\n  }\n\n  try {\n    const highlightRef = doc(db, 'users', userId, 'books', bookId);\n    \n    await updateDoc(highlightRef, {\n      highlights: arrayRemove(highlight)\n    });\n    \n    return { error: null };\n  } catch (error) {\n    console.error('Remove highlight error:', error);\n    return { error: error.message };\n  }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}