{"ast":null,"code":"var _jsxFileName = \"/Users/sydneysonday/Desktop/Senior/Reading Front End/senior-project/proj/src/components/BookReader.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { auth, saveHighlight, removeHighlight, getHighlights } from '../services/firebase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BookReader = ({\n  books\n}) => {\n  _s();\n  const {\n    bookTitle\n  } = useParams();\n  const [highlights, setHighlights] = useState([]);\n  const [error, setError] = useState('');\n  const [isLoading, setIsLoading] = useState(true);\n  const [currentBook, setCurrentBook] = useState(null);\n  const [currentChapter, setCurrentChapter] = useState(0);\n  useEffect(() => {\n    if (bookTitle) {\n      // Find the book in the books array\n      const book = books.find(b => b.title === bookTitle);\n      if (book) {\n        setCurrentBook(book);\n        loadHighlights();\n      } else {\n        setError('Book not found');\n      }\n    }\n  }, [bookTitle, books]);\n  const loadHighlights = async () => {\n    if (!bookTitle) {\n      setError('No book selected');\n      return;\n    }\n    try {\n      setIsLoading(true);\n      const {\n        highlights: savedHighlights,\n        error\n      } = await getHighlights(bookTitle);\n      if (error) {\n        setError(`Failed to load highlights: ${error}`);\n        return;\n      }\n      setHighlights(savedHighlights);\n      setTimeout(() => {\n        applyHighlights(savedHighlights);\n      }, 100); // Small delay to ensure content is rendered\n    } catch (err) {\n      setError('Failed to load highlights');\n      console.error(err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleTextSelection = async () => {\n    if (!bookTitle) {\n      setError('No book selected');\n      return;\n    }\n    const selection = window.getSelection();\n    const selectedText = selection.toString().trim();\n    if (!selectedText) return;\n    try {\n      const range = selection.getRangeAt(0);\n      const highlight = {\n        text: selectedText,\n        startPath: getNodePath(range.startContainer),\n        startOffset: range.startOffset,\n        endPath: getNodePath(range.endContainer),\n        endOffset: range.endOffset,\n        timestamp: new Date().toISOString(),\n        chapter: currentChapter\n      };\n      const {\n        error: saveError\n      } = await saveHighlight(bookTitle, highlight);\n      if (saveError) {\n        setError(`Failed to save highlight: ${saveError}`);\n        return;\n      }\n      setHighlights(prev => [...prev, highlight]);\n      applyHighlight(highlight);\n    } catch (err) {\n      setError('Failed to save highlight');\n      console.error(err);\n    }\n  };\n  const handleRemoveHighlight = async event => {\n    if (!event.target.classList.contains('highlighted-text')) return;\n    const timestamp = event.target.dataset.timestamp;\n    const highlightToRemove = highlights.find(h => h.timestamp === timestamp);\n    if (!highlightToRemove) return;\n    try {\n      const {\n        error\n      } = await removeHighlight(bookTitle, highlightToRemove);\n      if (error) {\n        setError(`Failed to remove highlight: ${error}`);\n        return;\n      }\n      setHighlights(prev => prev.filter(h => h.timestamp !== timestamp));\n\n      // Remove highlight span\n      const parent = event.target.parentNode;\n      while (event.target.firstChild) {\n        parent.insertBefore(event.target.firstChild, event.target);\n      }\n      parent.removeChild(event.target);\n    } catch (err) {\n      setError('Failed to remove highlight');\n      console.error(err);\n    }\n  };\n  const getNodePath = node => {\n    const path = [];\n    let current = node;\n    while (current.parentNode) {\n      const index = Array.from(current.parentNode.childNodes).indexOf(current);\n      path.unshift(index);\n      current = current.parentNode;\n    }\n    return path;\n  };\n  const getNodeFromPath = path => {\n    let current = document.querySelector('.book-content');\n    for (const index of path) {\n      if (current.childNodes[index]) {\n        current = current.childNodes[index];\n      } else {\n        console.error('Node path not found:', path);\n        return null;\n      }\n    }\n    return current;\n  };\n  const applyHighlight = highlight => {\n    try {\n      const startNode = getNodeFromPath(highlight.startPath);\n      const endNode = getNodeFromPath(highlight.endPath);\n      if (!startNode || !endNode) return;\n      const range = document.createRange();\n      range.setStart(startNode, highlight.startOffset);\n      range.setEnd(endNode, highlight.endOffset);\n      const span = document.createElement('span');\n      span.className = 'highlighted-text';\n      span.dataset.timestamp = highlight.timestamp;\n      range.surroundContents(span);\n    } catch (err) {\n      console.error('Failed to apply highlight:', err);\n    }\n  };\n  const applyHighlights = highlightsToApply => {\n    // Remove existing highlights first\n    document.querySelectorAll('.highlighted-text').forEach(el => {\n      const parent = el.parentNode;\n      while (el.firstChild) parent.insertBefore(el.firstChild, el);\n      parent.removeChild(el);\n    });\n\n    // Apply new highlights for current chapter\n    highlightsToApply.filter(h => h.chapter === currentChapter).forEach(highlight => applyHighlight(highlight));\n  };\n  const handleNextChapter = () => {\n    if (currentBook && currentChapter < currentBook.chapters.length - 1) {\n      setCurrentChapter(prev => prev + 1);\n    }\n  };\n  const handlePreviousChapter = () => {\n    if (currentChapter > 0) {\n      setCurrentChapter(prev => prev - 1);\n    }\n  };\n  useEffect(() => {\n    // Reapply highlights when chapter changes\n    if (highlights.length > 0) {\n      setTimeout(() => {\n        applyHighlights(highlights);\n      }, 100);\n    }\n  }, [currentChapter]);\n  if (!currentBook) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading book...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"book-reader\",\n    children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: currentBook.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chapter-navigation\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handlePreviousChapter,\n        disabled: currentChapter === 0,\n        children: \"Previous Chapter\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"Chapter \", currentChapter + 1]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleNextChapter,\n        disabled: currentChapter === currentBook.chapters.length - 1,\n        children: \"Next Chapter\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: \"Loading highlights...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"book-content\",\n      onMouseUp: handleTextSelection,\n      onClick: handleRemoveHighlight,\n      children: currentBook.chapters[currentChapter]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 204,\n    columnNumber: 5\n  }, this);\n};\n\n// Add some CSS for the highlights and navigation\n_s(BookReader, \"7nBgrJpUWG+pgegqmGJig2cHozw=\", false, function () {\n  return [useParams];\n});\n_c = BookReader;\nconst styles = {\n  highlighted: {\n    backgroundColor: 'rgba(255, 255, 0, 0.3)',\n    cursor: 'pointer'\n  },\n  navigation: {\n    marginTop: '20px',\n    marginBottom: '20px'\n  }\n};\nexport default BookReader;\nvar _c;\n$RefreshReg$(_c, \"BookReader\");","map":{"version":3,"names":["React","useState","useEffect","useParams","auth","saveHighlight","removeHighlight","getHighlights","jsxDEV","_jsxDEV","BookReader","books","_s","bookTitle","highlights","setHighlights","error","setError","isLoading","setIsLoading","currentBook","setCurrentBook","currentChapter","setCurrentChapter","book","find","b","title","loadHighlights","savedHighlights","setTimeout","applyHighlights","err","console","handleTextSelection","selection","window","getSelection","selectedText","toString","trim","range","getRangeAt","highlight","text","startPath","getNodePath","startContainer","startOffset","endPath","endContainer","endOffset","timestamp","Date","toISOString","chapter","saveError","prev","applyHighlight","handleRemoveHighlight","event","target","classList","contains","dataset","highlightToRemove","h","filter","parent","parentNode","firstChild","insertBefore","removeChild","node","path","current","index","Array","from","childNodes","indexOf","unshift","getNodeFromPath","document","querySelector","startNode","endNode","createRange","setStart","setEnd","span","createElement","className","surroundContents","highlightsToApply","querySelectorAll","forEach","el","handleNextChapter","chapters","length","handlePreviousChapter","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","onMouseUp","_c","styles","highlighted","backgroundColor","cursor","navigation","marginTop","marginBottom","$RefreshReg$"],"sources":["/Users/sydneysonday/Desktop/Senior/Reading Front End/senior-project/proj/src/components/BookReader.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { auth, saveHighlight, removeHighlight, getHighlights } from '../services/firebase';\n\nconst BookReader = ({ books }) => {\n  const { bookTitle } = useParams();\n  const [highlights, setHighlights] = useState([]);\n  const [error, setError] = useState('');\n  const [isLoading, setIsLoading] = useState(true);\n  const [currentBook, setCurrentBook] = useState(null);\n  const [currentChapter, setCurrentChapter] = useState(0);\n\n  useEffect(() => {\n    if (bookTitle) {\n      // Find the book in the books array\n      const book = books.find(b => b.title === bookTitle);\n      if (book) {\n        setCurrentBook(book);\n        loadHighlights();\n      } else {\n        setError('Book not found');\n      }\n    }\n  }, [bookTitle, books]);\n\n  const loadHighlights = async () => {\n    if (!bookTitle) {\n      setError('No book selected');\n      return;\n    }\n\n    try {\n      setIsLoading(true);\n      const { highlights: savedHighlights, error } = await getHighlights(bookTitle);\n      \n      if (error) {\n        setError(`Failed to load highlights: ${error}`);\n        return;\n      }\n\n      setHighlights(savedHighlights);\n      setTimeout(() => {\n        applyHighlights(savedHighlights);\n      }, 100); // Small delay to ensure content is rendered\n    } catch (err) {\n      setError('Failed to load highlights');\n      console.error(err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleTextSelection = async () => {\n    if (!bookTitle) {\n      setError('No book selected');\n      return;\n    }\n\n    const selection = window.getSelection();\n    const selectedText = selection.toString().trim();\n\n    if (!selectedText) return;\n\n    try {\n      const range = selection.getRangeAt(0);\n      const highlight = {\n        text: selectedText,\n        startPath: getNodePath(range.startContainer),\n        startOffset: range.startOffset,\n        endPath: getNodePath(range.endContainer),\n        endOffset: range.endOffset,\n        timestamp: new Date().toISOString(),\n        chapter: currentChapter\n      };\n\n      const { error: saveError } = await saveHighlight(bookTitle, highlight);\n      \n      if (saveError) {\n        setError(`Failed to save highlight: ${saveError}`);\n        return;\n      }\n\n      setHighlights(prev => [...prev, highlight]);\n      applyHighlight(highlight);\n    } catch (err) {\n      setError('Failed to save highlight');\n      console.error(err);\n    }\n  };\n\n  const handleRemoveHighlight = async (event) => {\n    if (!event.target.classList.contains('highlighted-text')) return;\n    \n    const timestamp = event.target.dataset.timestamp;\n    const highlightToRemove = highlights.find(h => h.timestamp === timestamp);\n    \n    if (!highlightToRemove) return;\n\n    try {\n      const { error } = await removeHighlight(bookTitle, highlightToRemove);\n      if (error) {\n        setError(`Failed to remove highlight: ${error}`);\n        return;\n      }\n\n      setHighlights(prev => prev.filter(h => h.timestamp !== timestamp));\n      \n      // Remove highlight span\n      const parent = event.target.parentNode;\n      while (event.target.firstChild) {\n        parent.insertBefore(event.target.firstChild, event.target);\n      }\n      parent.removeChild(event.target);\n    } catch (err) {\n      setError('Failed to remove highlight');\n      console.error(err);\n    }\n  };\n\n  const getNodePath = (node) => {\n    const path = [];\n    let current = node;\n    while (current.parentNode) {\n      const index = Array.from(current.parentNode.childNodes).indexOf(current);\n      path.unshift(index);\n      current = current.parentNode;\n    }\n    return path;\n  };\n\n  const getNodeFromPath = (path) => {\n    let current = document.querySelector('.book-content');\n    for (const index of path) {\n      if (current.childNodes[index]) {\n        current = current.childNodes[index];\n      } else {\n        console.error('Node path not found:', path);\n        return null;\n      }\n    }\n    return current;\n  };\n\n  const applyHighlight = (highlight) => {\n    try {\n      const startNode = getNodeFromPath(highlight.startPath);\n      const endNode = getNodeFromPath(highlight.endPath);\n      \n      if (!startNode || !endNode) return;\n      \n      const range = document.createRange();\n      range.setStart(startNode, highlight.startOffset);\n      range.setEnd(endNode, highlight.endOffset);\n      \n      const span = document.createElement('span');\n      span.className = 'highlighted-text';\n      span.dataset.timestamp = highlight.timestamp;\n      range.surroundContents(span);\n    } catch (err) {\n      console.error('Failed to apply highlight:', err);\n    }\n  };\n\n  const applyHighlights = (highlightsToApply) => {\n    // Remove existing highlights first\n    document.querySelectorAll('.highlighted-text').forEach(el => {\n      const parent = el.parentNode;\n      while (el.firstChild) parent.insertBefore(el.firstChild, el);\n      parent.removeChild(el);\n    });\n\n    // Apply new highlights for current chapter\n    highlightsToApply\n      .filter(h => h.chapter === currentChapter)\n      .forEach(highlight => applyHighlight(highlight));\n  };\n\n  const handleNextChapter = () => {\n    if (currentBook && currentChapter < currentBook.chapters.length - 1) {\n      setCurrentChapter(prev => prev + 1);\n    }\n  };\n\n  const handlePreviousChapter = () => {\n    if (currentChapter > 0) {\n      setCurrentChapter(prev => prev - 1);\n    }\n  };\n\n  useEffect(() => {\n    // Reapply highlights when chapter changes\n    if (highlights.length > 0) {\n      setTimeout(() => {\n        applyHighlights(highlights);\n      }, 100);\n    }\n  }, [currentChapter]);\n\n  if (!currentBook) {\n    return <div>Loading book...</div>;\n  }\n\n  return (\n    <div className=\"book-reader\">\n      {error && <div className=\"error-message\">{error}</div>}\n      <h1>{currentBook.title}</h1>\n      <div className=\"chapter-navigation\">\n        <button \n          onClick={handlePreviousChapter} \n          disabled={currentChapter === 0}\n        >\n          Previous Chapter\n        </button>\n        <span>Chapter {currentChapter + 1}</span>\n        <button \n          onClick={handleNextChapter} \n          disabled={currentChapter === currentBook.chapters.length - 1}\n        >\n          Next Chapter\n        </button>\n      </div>\n      {isLoading ? (\n        <div className=\"loading\">Loading highlights...</div>\n      ) : (\n        <div \n          className=\"book-content\"\n          onMouseUp={handleTextSelection}\n          onClick={handleRemoveHighlight}\n        >\n          {currentBook.chapters[currentChapter]}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Add some CSS for the highlights and navigation\nconst styles = {\n  highlighted: {\n    backgroundColor: 'rgba(255, 255, 0, 0.3)',\n    cursor: 'pointer',\n  },\n  navigation: {\n    marginTop: '20px',\n    marginBottom: '20px',\n  },\n};\n\nexport default BookReader;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,SAAS,QAAQ,kBAAkB;AAC5C,SAASC,IAAI,EAAEC,aAAa,EAAEC,eAAe,EAAEC,aAAa,QAAQ,sBAAsB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3F,MAAMC,UAAU,GAAGA,CAAC;EAAEC;AAAM,CAAC,KAAK;EAAAC,EAAA;EAChC,MAAM;IAAEC;EAAU,CAAC,GAAGV,SAAS,CAAC,CAAC;EACjC,MAAM,CAACW,UAAU,EAAEC,aAAa,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACe,KAAK,EAAEC,QAAQ,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACiB,SAAS,EAAEC,YAAY,CAAC,GAAGlB,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACmB,WAAW,EAAEC,cAAc,CAAC,GAAGpB,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACqB,cAAc,EAAEC,iBAAiB,CAAC,GAAGtB,QAAQ,CAAC,CAAC,CAAC;EAEvDC,SAAS,CAAC,MAAM;IACd,IAAIW,SAAS,EAAE;MACb;MACA,MAAMW,IAAI,GAAGb,KAAK,CAACc,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,KAAK,KAAKd,SAAS,CAAC;MACnD,IAAIW,IAAI,EAAE;QACRH,cAAc,CAACG,IAAI,CAAC;QACpBI,cAAc,CAAC,CAAC;MAClB,CAAC,MAAM;QACLX,QAAQ,CAAC,gBAAgB,CAAC;MAC5B;IACF;EACF,CAAC,EAAE,CAACJ,SAAS,EAAEF,KAAK,CAAC,CAAC;EAEtB,MAAMiB,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAI,CAACf,SAAS,EAAE;MACdI,QAAQ,CAAC,kBAAkB,CAAC;MAC5B;IACF;IAEA,IAAI;MACFE,YAAY,CAAC,IAAI,CAAC;MAClB,MAAM;QAAEL,UAAU,EAAEe,eAAe;QAAEb;MAAM,CAAC,GAAG,MAAMT,aAAa,CAACM,SAAS,CAAC;MAE7E,IAAIG,KAAK,EAAE;QACTC,QAAQ,CAAC,8BAA8BD,KAAK,EAAE,CAAC;QAC/C;MACF;MAEAD,aAAa,CAACc,eAAe,CAAC;MAC9BC,UAAU,CAAC,MAAM;QACfC,eAAe,CAACF,eAAe,CAAC;MAClC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;IACX,CAAC,CAAC,OAAOG,GAAG,EAAE;MACZf,QAAQ,CAAC,2BAA2B,CAAC;MACrCgB,OAAO,CAACjB,KAAK,CAACgB,GAAG,CAAC;IACpB,CAAC,SAAS;MACRb,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,MAAMe,mBAAmB,GAAG,MAAAA,CAAA,KAAY;IACtC,IAAI,CAACrB,SAAS,EAAE;MACdI,QAAQ,CAAC,kBAAkB,CAAC;MAC5B;IACF;IAEA,MAAMkB,SAAS,GAAGC,MAAM,CAACC,YAAY,CAAC,CAAC;IACvC,MAAMC,YAAY,GAAGH,SAAS,CAACI,QAAQ,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC;IAEhD,IAAI,CAACF,YAAY,EAAE;IAEnB,IAAI;MACF,MAAMG,KAAK,GAAGN,SAAS,CAACO,UAAU,CAAC,CAAC,CAAC;MACrC,MAAMC,SAAS,GAAG;QAChBC,IAAI,EAAEN,YAAY;QAClBO,SAAS,EAAEC,WAAW,CAACL,KAAK,CAACM,cAAc,CAAC;QAC5CC,WAAW,EAAEP,KAAK,CAACO,WAAW;QAC9BC,OAAO,EAAEH,WAAW,CAACL,KAAK,CAACS,YAAY,CAAC;QACxCC,SAAS,EAAEV,KAAK,CAACU,SAAS;QAC1BC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;QACnCC,OAAO,EAAEjC;MACX,CAAC;MAED,MAAM;QAAEN,KAAK,EAAEwC;MAAU,CAAC,GAAG,MAAMnD,aAAa,CAACQ,SAAS,EAAE8B,SAAS,CAAC;MAEtE,IAAIa,SAAS,EAAE;QACbvC,QAAQ,CAAC,6BAA6BuC,SAAS,EAAE,CAAC;QAClD;MACF;MAEAzC,aAAa,CAAC0C,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEd,SAAS,CAAC,CAAC;MAC3Ce,cAAc,CAACf,SAAS,CAAC;IAC3B,CAAC,CAAC,OAAOX,GAAG,EAAE;MACZf,QAAQ,CAAC,0BAA0B,CAAC;MACpCgB,OAAO,CAACjB,KAAK,CAACgB,GAAG,CAAC;IACpB;EACF,CAAC;EAED,MAAM2B,qBAAqB,GAAG,MAAOC,KAAK,IAAK;IAC7C,IAAI,CAACA,KAAK,CAACC,MAAM,CAACC,SAAS,CAACC,QAAQ,CAAC,kBAAkB,CAAC,EAAE;IAE1D,MAAMX,SAAS,GAAGQ,KAAK,CAACC,MAAM,CAACG,OAAO,CAACZ,SAAS;IAChD,MAAMa,iBAAiB,GAAGnD,UAAU,CAACW,IAAI,CAACyC,CAAC,IAAIA,CAAC,CAACd,SAAS,KAAKA,SAAS,CAAC;IAEzE,IAAI,CAACa,iBAAiB,EAAE;IAExB,IAAI;MACF,MAAM;QAAEjD;MAAM,CAAC,GAAG,MAAMV,eAAe,CAACO,SAAS,EAAEoD,iBAAiB,CAAC;MACrE,IAAIjD,KAAK,EAAE;QACTC,QAAQ,CAAC,+BAA+BD,KAAK,EAAE,CAAC;QAChD;MACF;MAEAD,aAAa,CAAC0C,IAAI,IAAIA,IAAI,CAACU,MAAM,CAACD,CAAC,IAAIA,CAAC,CAACd,SAAS,KAAKA,SAAS,CAAC,CAAC;;MAElE;MACA,MAAMgB,MAAM,GAAGR,KAAK,CAACC,MAAM,CAACQ,UAAU;MACtC,OAAOT,KAAK,CAACC,MAAM,CAACS,UAAU,EAAE;QAC9BF,MAAM,CAACG,YAAY,CAACX,KAAK,CAACC,MAAM,CAACS,UAAU,EAAEV,KAAK,CAACC,MAAM,CAAC;MAC5D;MACAO,MAAM,CAACI,WAAW,CAACZ,KAAK,CAACC,MAAM,CAAC;IAClC,CAAC,CAAC,OAAO7B,GAAG,EAAE;MACZf,QAAQ,CAAC,4BAA4B,CAAC;MACtCgB,OAAO,CAACjB,KAAK,CAACgB,GAAG,CAAC;IACpB;EACF,CAAC;EAED,MAAMc,WAAW,GAAI2B,IAAI,IAAK;IAC5B,MAAMC,IAAI,GAAG,EAAE;IACf,IAAIC,OAAO,GAAGF,IAAI;IAClB,OAAOE,OAAO,CAACN,UAAU,EAAE;MACzB,MAAMO,KAAK,GAAGC,KAAK,CAACC,IAAI,CAACH,OAAO,CAACN,UAAU,CAACU,UAAU,CAAC,CAACC,OAAO,CAACL,OAAO,CAAC;MACxED,IAAI,CAACO,OAAO,CAACL,KAAK,CAAC;MACnBD,OAAO,GAAGA,OAAO,CAACN,UAAU;IAC9B;IACA,OAAOK,IAAI;EACb,CAAC;EAED,MAAMQ,eAAe,GAAIR,IAAI,IAAK;IAChC,IAAIC,OAAO,GAAGQ,QAAQ,CAACC,aAAa,CAAC,eAAe,CAAC;IACrD,KAAK,MAAMR,KAAK,IAAIF,IAAI,EAAE;MACxB,IAAIC,OAAO,CAACI,UAAU,CAACH,KAAK,CAAC,EAAE;QAC7BD,OAAO,GAAGA,OAAO,CAACI,UAAU,CAACH,KAAK,CAAC;MACrC,CAAC,MAAM;QACL3C,OAAO,CAACjB,KAAK,CAAC,sBAAsB,EAAE0D,IAAI,CAAC;QAC3C,OAAO,IAAI;MACb;IACF;IACA,OAAOC,OAAO;EAChB,CAAC;EAED,MAAMjB,cAAc,GAAIf,SAAS,IAAK;IACpC,IAAI;MACF,MAAM0C,SAAS,GAAGH,eAAe,CAACvC,SAAS,CAACE,SAAS,CAAC;MACtD,MAAMyC,OAAO,GAAGJ,eAAe,CAACvC,SAAS,CAACM,OAAO,CAAC;MAElD,IAAI,CAACoC,SAAS,IAAI,CAACC,OAAO,EAAE;MAE5B,MAAM7C,KAAK,GAAG0C,QAAQ,CAACI,WAAW,CAAC,CAAC;MACpC9C,KAAK,CAAC+C,QAAQ,CAACH,SAAS,EAAE1C,SAAS,CAACK,WAAW,CAAC;MAChDP,KAAK,CAACgD,MAAM,CAACH,OAAO,EAAE3C,SAAS,CAACQ,SAAS,CAAC;MAE1C,MAAMuC,IAAI,GAAGP,QAAQ,CAACQ,aAAa,CAAC,MAAM,CAAC;MAC3CD,IAAI,CAACE,SAAS,GAAG,kBAAkB;MACnCF,IAAI,CAAC1B,OAAO,CAACZ,SAAS,GAAGT,SAAS,CAACS,SAAS;MAC5CX,KAAK,CAACoD,gBAAgB,CAACH,IAAI,CAAC;IAC9B,CAAC,CAAC,OAAO1D,GAAG,EAAE;MACZC,OAAO,CAACjB,KAAK,CAAC,4BAA4B,EAAEgB,GAAG,CAAC;IAClD;EACF,CAAC;EAED,MAAMD,eAAe,GAAI+D,iBAAiB,IAAK;IAC7C;IACAX,QAAQ,CAACY,gBAAgB,CAAC,mBAAmB,CAAC,CAACC,OAAO,CAACC,EAAE,IAAI;MAC3D,MAAM7B,MAAM,GAAG6B,EAAE,CAAC5B,UAAU;MAC5B,OAAO4B,EAAE,CAAC3B,UAAU,EAAEF,MAAM,CAACG,YAAY,CAAC0B,EAAE,CAAC3B,UAAU,EAAE2B,EAAE,CAAC;MAC5D7B,MAAM,CAACI,WAAW,CAACyB,EAAE,CAAC;IACxB,CAAC,CAAC;;IAEF;IACAH,iBAAiB,CACd3B,MAAM,CAACD,CAAC,IAAIA,CAAC,CAACX,OAAO,KAAKjC,cAAc,CAAC,CACzC0E,OAAO,CAACrD,SAAS,IAAIe,cAAc,CAACf,SAAS,CAAC,CAAC;EACpD,CAAC;EAED,MAAMuD,iBAAiB,GAAGA,CAAA,KAAM;IAC9B,IAAI9E,WAAW,IAAIE,cAAc,GAAGF,WAAW,CAAC+E,QAAQ,CAACC,MAAM,GAAG,CAAC,EAAE;MACnE7E,iBAAiB,CAACkC,IAAI,IAAIA,IAAI,GAAG,CAAC,CAAC;IACrC;EACF,CAAC;EAED,MAAM4C,qBAAqB,GAAGA,CAAA,KAAM;IAClC,IAAI/E,cAAc,GAAG,CAAC,EAAE;MACtBC,iBAAiB,CAACkC,IAAI,IAAIA,IAAI,GAAG,CAAC,CAAC;IACrC;EACF,CAAC;EAEDvD,SAAS,CAAC,MAAM;IACd;IACA,IAAIY,UAAU,CAACsF,MAAM,GAAG,CAAC,EAAE;MACzBtE,UAAU,CAAC,MAAM;QACfC,eAAe,CAACjB,UAAU,CAAC;MAC7B,CAAC,EAAE,GAAG,CAAC;IACT;EACF,CAAC,EAAE,CAACQ,cAAc,CAAC,CAAC;EAEpB,IAAI,CAACF,WAAW,EAAE;IAChB,oBAAOX,OAAA;MAAA6F,QAAA,EAAK;IAAe;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EACnC;EAEA,oBACEjG,OAAA;IAAKmF,SAAS,EAAC,aAAa;IAAAU,QAAA,GACzBtF,KAAK,iBAAIP,OAAA;MAAKmF,SAAS,EAAC,eAAe;MAAAU,QAAA,EAAEtF;IAAK;MAAAuF,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,eACtDjG,OAAA;MAAA6F,QAAA,EAAKlF,WAAW,CAACO;IAAK;MAAA4E,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eAC5BjG,OAAA;MAAKmF,SAAS,EAAC,oBAAoB;MAAAU,QAAA,gBACjC7F,OAAA;QACEkG,OAAO,EAAEN,qBAAsB;QAC/BO,QAAQ,EAAEtF,cAAc,KAAK,CAAE;QAAAgF,QAAA,EAChC;MAED;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACTjG,OAAA;QAAA6F,QAAA,GAAM,UAAQ,EAAChF,cAAc,GAAG,CAAC;MAAA;QAAAiF,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACzCjG,OAAA;QACEkG,OAAO,EAAET,iBAAkB;QAC3BU,QAAQ,EAAEtF,cAAc,KAAKF,WAAW,CAAC+E,QAAQ,CAACC,MAAM,GAAG,CAAE;QAAAE,QAAA,EAC9D;MAED;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,EACLxF,SAAS,gBACRT,OAAA;MAAKmF,SAAS,EAAC,SAAS;MAAAU,QAAA,EAAC;IAAqB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,gBAEpDjG,OAAA;MACEmF,SAAS,EAAC,cAAc;MACxBiB,SAAS,EAAE3E,mBAAoB;MAC/ByE,OAAO,EAAEhD,qBAAsB;MAAA2C,QAAA,EAE9BlF,WAAW,CAAC+E,QAAQ,CAAC7E,cAAc;IAAC;MAAAiF,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClC,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;;AAED;AAAA9F,EAAA,CAxOMF,UAAU;EAAA,QACQP,SAAS;AAAA;AAAA2G,EAAA,GAD3BpG,UAAU;AAyOhB,MAAMqG,MAAM,GAAG;EACbC,WAAW,EAAE;IACXC,eAAe,EAAE,wBAAwB;IACzCC,MAAM,EAAE;EACV,CAAC;EACDC,UAAU,EAAE;IACVC,SAAS,EAAE,MAAM;IACjBC,YAAY,EAAE;EAChB;AACF,CAAC;AAED,eAAe3G,UAAU;AAAC,IAAAoG,EAAA;AAAAQ,YAAA,CAAAR,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}